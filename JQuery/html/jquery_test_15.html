<!--
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
jquery_test_15.html
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	=>학점 관련 [체크박스]를 체크하고 [검색] 버튼 클릭하면 체크한 학점에 맞는 [검색 결과]만 화면에 보여준다.
-->
<html><meta charset="UTF-8">
<head>
	<style>.style1 { background-color: #00f; color: #fff; } </style>
	<script src="jquery-1.11.0.min.js"></script>
	<script>

        // ----------------------------------------------------
        // 화면에 보이는 tr 태그의 짝수행, 홀수행의 배경색을 지정하는 함수 선언하기
        // ----------------------------------------------------
        function inputBgColor_to_tr(
            trsObj          // 화면에 보이거나 안보이게 할 대상이 되는 tr 태그를 관리하는 JQuery 객체의 메위주.
            ,oddBgcolor     // 홀수번째 tr 태그의 배경색.
            ,evenBgcolor    // 짝수번째 tr 태그의 배경색.  
        ){

            // 함수 안에서 색상 강제 지정.  
            // oddBgcolor = "white";
            // evenBgcolor = "lightgray";

            // tr 태그 중 화면에 보이는 tr 를 관리하는 JQuery 객체의 메위주 얻기
            var visibleTrsObj = trsObj.filter(":visible")

            // tr 태그 중 화면에 보이는 tr 중 홀수 tr 만 골라서 배경색을 주기
            visibleTrsObj.filter(":even").css("background-color", oddBgcolor);

            // tr 태그 중 화면에 보이는 tr 중 짝수 tr 만 골라서 배경색을 주기
            visibleTrsObj.filter(":odd").css("background-color", evenBgcolor);

        }




		$(document).ready(function() {

			// 테이블 관리 변수.
            var tableObj = $(".sungjuk");

			// 테이블 색상 함수 호출.
			inputBgColor_to_tr( tableObj.find("tbody tr"), "white", "lightgray" );


			// 모든 tr 태그 담은 변수
			var trObj = tableObj.find("tbody tr");

			// alert(trObj.length) 	// 테스트 // tr 개수 확인



			// 2번 인덱스(평균) 열 전체 구하기
			var allTd = tableObj.find("tbody td:nth-child(3)")
			
			
			// $(".msg").text(allTd.text()); // 테스트 // 2번 인덱스 열 전체 확인하기.




            $(".search").click(function(){
				

				// 체크박스 체크된것 골라내서 변수 담기. 
				var input = $("[name=hakjum]:checked")

				// 배열변수 선언.
				var eve = [];

				// 배열변수에 체크된것의 value 값을 each를 써서 누적.
				// 체크된 체크박스가 무슨학점인지 value 값 문자로 리턴.
				input.each(function(){
					eve.push($(this).val());
				})

				// alert(eve)	// 테스트용 // 체크 value 값 누적 확인.
								
				if(eve=="A"){
					// A학점 체크하고 검색 누르면 일단 숨기기.
					trObj.hide();

					// 반복문 돌려서 90점 이상인 A학점들 골라냄
					for(var i=0; i<allTd.length; i++){

						// 평균 열의 i 번째의 text 값을 int에 대입.
						var int = allTd.eq(i).text()

						// int 값을 숫자로 변환.
						int = parseInt(int,10);

						// alert(int) // 테스트용 // 반복문 돌리면서 평균 열 검색 확인. 

						// 조건문으로 숫자 조건을 걸어서 
						if( int>=90 ){
							// 조건에 걸린 tr을 보여주기.
							trObj.eq(i).show();


							var count = trObj.filter(":visible").length;
							aler(count);
							$(".count").text(count);

						}

					};
					// 검색결과 후 색상 다시 정렬.
					inputBgColor_to_tr( tableObj.find("tbody tr"), "white", "lightgray" );

					

				}

				if(eve=="B"){

					trObj.hide();

					for(var i=0; i<allTd.length; i++){

						var int = allTd.eq(i).text()

						int = parseInt(int,10);

						// alert(int) // 테스트용 // 반복문 돌리면서 평균 열 검색 확인. 

						if( int>=80 && int<90 ){
							trObj.eq(i).show();
						}

						
					};
					inputBgColor_to_tr( tableObj.find("tbody tr"), "white", "lightgray" );

				}

				if(eve=="C"){

					trObj.hide();

					for(var i=0; i<allTd.length; i++){

						var int = allTd.eq(i).text()

						int = parseInt(int,10);

						// alert(int) // 테스트용 // 반복문 돌리면서 평균 열 검색 확인. 

						if( int>=70 && int<80 ){
							trObj.eq(i).show();
						}

						
					};
					
				}

				if(eve=="D"){

					trObj.hide();

					for(var i=0; i<allTd.length; i++){

						var int = allTd.eq(i).text()

						int = parseInt(int,10);

						// alert(int) // 테스트용 // 반복문 돌리면서 평균 열 검색 확인. 

						if( int>=60 && int<70 ){
							trObj.eq(i).show();
						}

						
					};
					
				}

				if(eve=="F"){

					trObj.hide();

					for(var i=0; i<allTd.length; i++){

						var int = allTd.eq(i).text()

						int = parseInt(int,10);

						// alert(int) // 테스트용 // 반복문 돌리면서 평균 열 검색 확인. 

						if( int<60 ){
							trObj.eq(i).show();
						}

						
					};
					
				}

				if(eve=="A,B"){

					trObj.hide();

					for(var i=0; i<allTd.length; i++){

						var int = allTd.eq(i).text()

						int = parseInt(int,10);

						// alert(int) // 테스트용 // 반복문 돌리면서 평균 열 검색 확인. 

						if( int>=80 ){
							trObj.eq(i).show();
						}

						
					};
					
				}


				// alert($("[name=hakjum]:eq(0):checked").attr("value"))

				

				// alert(input.attr("value"))

				$(".msg").text(input.attr("value"));	// 테스트용. // 체크된 학점 하단에 표기.












			});







            // 모두검색 눌렀을 때 모두 나오게 하는 코딩.  
            $(".allSearch").click(function(){

            var tableObj = $(".sungjuk");

            tableObj.find("tbody tr:odd").css("background-color", "lightgray");
            tableObj.find("tbody tr:even").css("background-color", "white");

            tableObj.find("tr").show();

            });


		}); 
	</script>
</head>
<body><center>
<!-------------------------------------------------->
<input type="checkbox" name="hakjum" value="A">A학점
<input type="checkbox" name="hakjum" value="B">B학점
<input type="checkbox" name="hakjum" value="C">C학점
<input type="checkbox" name="hakjum" value="D">D학점
<input type="checkbox" name="hakjum" value="F">F학점<br>

<input type="button" value="검색" class="search" >
<input type="button" value="모두검색" class="allSearch" ><br><br>
<!-------------------------------------------------->
<div class="count"></div>
<table border="1" cellpadding=5 class="sungjuk" style="border-collapse:collapse;">
	<thead>
		<tr ><th>번호<th>이름<th>평균
	</thead>
	<tbody>
		<tr><td>101<td>John<td>87
		<tr><td>102<td>Naman<td>90
		<tr><td>103<td>Chirag<td>85
		<tr><td>104<td>David<td>92
		<tr><td>105<td>Kelly<td>81
		<tr><td>106<td>Charles<td>77
		<tr><td>107<td>Jerry<td>91
		<tr><td>108<td>Beth<td>87
		<tr><td>109<td>Caroline<td>82
		<tr><td>110<td>Hanen<td>71
		<tr><td>111<td>Douglas<td>57
		<tr><td>112<td>Tim<td>86
		<tr><td>113<td>Michael<td>68
		<tr><td>114<td>Kimbley<td>88
		<tr><td>115<td>Christinax<td>72
		<tr><td>116<td>유원영<td>100
		<tr><td>117<td>강다니엘<td>20
		<tr><td>118<td>박인선<td>20
	</tbody>
</table>


<div class="msg"></div>  <!--테스트용 div 태그--> 

</body>


</html>